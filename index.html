<!DOCTYPE html>
<html lang="pl">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Wirtualna kostka Rubika 3x3 — nauka</title>

		<!-- Import map: pozwala plikom z examples/jsm/... rozwiązać "three" -->
		<script type="importmap">
			{
				"imports": {
					"three": "./vendor/three/build/three.module.js"
				}
			}
		</script>

		<link rel="stylesheet" href="./styles.css" />
	</head>
	<body>
		<!-- Widok główny (menu startowe) -->
		<div id="homeView">
			<div class="home-hero">
				<h1 class="home-title">Aplikacja do nauki blindfold 3x3</h1>
				<div class="home-actions">
					<button id="newProfileBtn" class="btn btn-lg">Nowa kostka</button>
					<button id="openProfilesBtn" class="btn btn-lg btn-secondary">Wczytaj kostkę</button>
				</div>
			</div>
		</div>

		<!-- Widok listy profili -->
		<div id="profilesView" class="hidden">
			<div class="profiles-header">
				<button id="backToHomeFromProfiles" class="btn btn-icon" aria-label="Powrót">←</button>
				<h2 class="profiles-title">Twoje kostki</h2>
			</div>
			<div id="profilesList"></div>
		</div>

		<!-- Widok kostki (scena + UI) -->
		<div id="cubeView" class="hidden">
			<button id="backToHome" aria-label="Powrót do menu">×</button>
		<!-- Hamburger (mobile) -->
		<button id="menuToggle" aria-label="Menu" aria-expanded="false" aria-controls="ui">☰</button>
		<div id="app"></div>

		<!-- Panel treningu elementu (formularz pod sceną) -->
		<div id="pieceTrainerUI" aria-hidden="true">
			<div id="pieceTrainerFields"></div>
			<div class="toolbar">
				<button id="checkPieceAnswers">Sprawdź</button>
				<button id="nextPieceTrainer">Następny element</button>
			</div>
		</div>

		<div id="ui">
			<h1>Nauka nazewnictwa pól - Blindfold 3x3 OldPochmann</h1>
			<div class="row">
				<label
					>Tryb:
					<select id="mode">
						<option value="edit">Edycja literek</option>
						<option value="quiz">Quiz (zgaduj)</option>
					</select>
				</label>
				<label> <input type="checkbox" id="toggleLetters" checked /> Ukryj oznaczenia </label>
			</div>
			<div class="row">
				<button id="reset">Reset literek i układu</button>
				<button id="export">Eksportuj oznaczenia</button>
				<button id="import">Importuj oznaczenia</button>
			</div>
			<div class="row">
				<button id="openEdgePieceQuiz">Trening elementów — krawędź (mini 3D)</button>
				<button id="openCornerPieceQuiz">Trening elementów — róg (mini 3D)</button>
			</div>
			<div class="row">
				<button id="openFullCube">Cała kostka 3x3</button>
			</div>
			<div class="row" id="themeRow">
				<label class="switch" aria-label="Przełącz tryb jasny/ciemny">
					<input type="checkbox" id="toggleTheme" />
					<span class="slider"></span>
				</label>
				<span id="themeLabel">Tryb: Ciemny</span>
			</div>
			<div class="hint">
				Obracaj: LPM • Przesuwaj: PPM/WASD • Zoom: kółko<br />
				Kliknij naklejkę: wpisz literę (puste = usuń). Litery zapisują się w przeglądarce.
			</div>
			<div id="orientationSummary" class="orientation-summary">
				<div class="orientation-summary__title">Twoje ustawienie kostki</div>
				<div class="orientation-summary-inline">
					<div class="orientation-summary__row">
						<span class="orientation-summary__label">Wybrana góra:</span>
						<span id="summaryTopSwatch" class="orientation-swatch empty" aria-label="Góra"></span>
					</div>
					<div class="orientation-summary__row">
						<span class="orientation-summary__label">Wybrany front:</span>
						<span id="summaryFrontSwatch" class="orientation-swatch empty" aria-label="Front"></span>
					</div>
				</div>
			</div>
		</div>

		<div id="toast"></div>

		<!-- Modal wprowadzania litery (zastępuje natywny prompt) -->
		<div id="letterModal" aria-hidden="true">
			<div class="letter-modal__backdrop"></div>
			<div class="letter-modal__content" role="dialog" aria-modal="true">
				<h2 id="letterModalTitle">Litera dla pola</h2>
				<input id="letterModalInput" type="text" autocomplete="off" />
				<div class="toolbar">
					<button id="letterModalOk">OK</button>
					<button id="letterModalCancel">Anuluj</button>
				</div>
			</div>
		</div>

		<!-- Modal potwierdzenia resetu literek -->
		<div id="resetModal" aria-hidden="true">
			<div class="letter-modal__backdrop"></div>
			<div class="letter-modal__content" role="dialog" aria-modal="true" aria-labelledby="resetModalTitle">
				<h2 id="resetModalTitle">Zresetować literki?</h2>
				<p id="resetModalDesc" class="modal-desc">Ta operacja usunie wszystkie literki.</p>
				<div class="toolbar">
					<button id="resetCancel">Anuluj</button>
					<button id="resetConfirm">Zresetuj literki</button>
				</div>
			</div>
		</div>

		<!-- Pierwsze uruchomienie: wybór orientacji kostki (dwukrokowy) -->
		<div id="orientationOverlay" aria-hidden="true">
			<div class="orientation-card">
				<div id="orientationStepTop">
					<h2>Wybierz górę kostki</h2>
					<div class="orientation-section">
						<div class="color-grid" id="topChoices" role="radiogroup" aria-label="Wybierz kolor góry"></div>
					</div>
					<div class="toolbar">
						<button id="orientationNextBtn" disabled>Dalej</button>
					</div>
				</div>
				<div id="orientationStepFront" hidden>
					<h2>Wybierz front</h2>
					<div class="orientation-section">
						<div class="color-grid" id="frontChoices" role="radiogroup" aria-label="Wybierz kolor frontu"></div>
					</div>
					<div class="toolbar">
						<button id="orientationBackBtn">Wróć</button>
						<button id="orientationSaveBtn" disabled>Zatwierdź</button>
					</div>
				</div>
			</div>
		</div>

		</div>

		<!-- Usunięto: modal mini‑sceny (#pieceQuizModal) — pozostaje tylko tryb trenera na miejscu kostki -->

		<!-- Główny moduł -->
		<script type="module" src="./src/main.js"></script>
	</body>
</html>
